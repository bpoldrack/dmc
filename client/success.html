<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="How-do-you-science survey" />
  <meta name="author" content="Psychoinformatics Lab" />

  <title>Victory! — How Do You Science?</title>

  <link rel="stylesheet" href="css/dmc.css" />

  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v2">
  <link rel="icon" type="image/png" href="/favicon-32x32.png?v2" sizes="32x32">
  <link rel="icon" type="image/png" href="/favicon-16x16.png?v2" sizes="16x16">
  <link rel="manifest" href="/manifest.json?v2">
  <link rel="mask-icon" href="/safari-pinned-tab.svg?v2" color="#5bbad5">
  <link rel="shortcut icon" href="/favicon.ico?v2">
  <meta name="theme-color" content="#ffffff">

  <style>
  header {
    text-align: center;
  }
  main {
    align-items: flex-start;
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
  }
  main > div { flex-basis: 100%; }
  @media screen and (min-width: 1000px) {
    main > div { flex-basis: 50%; }
    main > div:nth-child(2) { order: 3 ;}
    main > div:nth-child(4) { order: 4 ;}
  }
  svg {
    width: 80%;
  }
  </style>
</head>

<body>
<header>
  <h1>Victory!</h1>
  <p>Your submission has been received. Here are your results:</p>
</header>
<main>
  <div>
    <h2><i class="icon-secret"></i> Private Record</h2>
    <p>Use this URL to update your record in the future.<br />
       Don't share it. Keep it secret... keep it safe!<br />
       <i class="icon-pencil"></i><a href="" id="uuid_link"></a>
    </p>
  </div>
  <div title="Scan to get URL" id="uuid_qrcode"></div>
  <div>
    <h2><i class="icon-users"></i> Show and Tell</h2>
    <p>Use this URL to see how your &ldquo;science&rdquo; compares to others.<br>
       Share it with anyone you like!<br />
       <i class="icon-share"></i><a href="" id="public_link"></a>
    </p>
  </div>
  <div title="Scan to get URL" id="public_qrcode"></div>
</main>
<footer>
  <p class="text-center text-muted"><small>
      © 2015 Alex Waite, <a href="http://www.psychoinformatics.de">Psychoinformatics.de</a> &nbsp;&bull;&nbsp; Code Freely available on <a href="https://github.com/psychoinformatics-de/dmc">GitHub</a>
  </small></p>
</footer>

<script src="js/qrcode.js"></script>
<script>
function getUrlVar(key){
  var result = new RegExp(key + "=([^&]*)", "i").exec(window.location.search);
  return result && unescape(result[1]) || "";
}

document.addEventListener("DOMContentLoaded", function() {
  // compose actual URLs
  var priv_url = "http://howdoyouscience.net/?uuid=" + getUrlVar("uuid");
  var pub_url = "http://howdoyouscience.net/p/?pubid=" + getUrlVar("pubid");

  var priv_link = document.getElementById('uuid_link');
  priv_link.innerHTML = priv_url;
  priv_link.setAttribute('href', priv_url);
  var qrcode = new QRCode(priv_url);
  document.getElementById('uuid_qrcode').innerHTML = qrcode.svg();

  var pub_link = document.getElementById('public_link');
  pub_link.innerHTML = pub_url;
  pub_link.setAttribute('href', pub_url);
  var qrcode = new QRCode(pub_url);
  document.getElementById('public_qrcode').innerHTML = qrcode.svg();
});
</script>
</body>
</html>
