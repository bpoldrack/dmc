<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="How-do-you-science survey" />
  <meta name="author" content="Psychoinformatics Lab" />

  <title>Survey — How Do You Science?</title>

  <link rel="stylesheet" href="css/dmc.css" />
  <link rel="stylesheet" href="css/survey.css" />

  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v2">
  <link rel="icon" type="image/png" href="/favicon-32x32.png?v2" sizes="32x32">
  <link rel="icon" type="image/png" href="/favicon-16x16.png?v2" sizes="16x16">
  <link rel="manifest" href="/manifest.json?v2">
  <link rel="mask-icon" href="/safari-pinned-tab.svg?v2" color="#5bbad5">
  <link rel="shortcut icon" href="/favicon.ico?v2">
  <meta name="theme-color" content="#ffffff">
</head>

<body>
<noscript>
  <div id="noscript" class="text-center">
    <p>This page requires JavaScript.</p>
    <p>I know, I know. Sites that require JavaScript bother me too.
    <em>But</em>, I can promise you that we don't do any tracking, sniffing, etc
    &mdash; <em>at all</em>. We just need it to determine which questions to ask
    you. Kinda like "choose your own adventure", JS edition.</p>
  </div>
</noscript>

<header id="banner">
  <div id="splash"></div>
  <div id="hook">
    <h1>How Do <em>You</em> Science?</h1>
    <a id="tell_us" class='icon-right-open' role='button'>Tell Us</a>
    <p>Find&nbsp;out&nbsp;how&nbsp;you&nbsp;compare&nbsp;to&nbsp;others
      &bull;&nbsp;It&nbsp;takes&nbsp;just&nbsp;a&nbsp;few&nbsp;minutes
      &bull;&nbsp;No&nbsp;email&nbsp;or&nbsp;account&nbsp;needed<br>(<a href="faq.html">details</a>)</p>
  </div>
</header>

<main>
<form id="survey">
  <input name="client_version" type="hidden" value="3" />
  <input id="leftovers" name="leftovers" type="hidden" value="" />

  <div class='timeline'>
    <div class='tl-panel badge-university visible'>
      <h2>Employer</h2>
      <p>Select what fits best</p>
      <select name="employer" required>
          <option value="" disabled selected hidden>— Select —</option>
          <option>University/Higher-Education</option>
          <option>Public Research Institution</option>
          <option>Private Research Institution</option>
          <option>Company</option>
      </select>
    </div>

    <div class='tl-panel badge-globe'>
      <h2>Country</h2>
      <p>In which country is the lab you primarily work for?</p>
      <select name="country" required>
        <option value="" disabled selected hidden>— Select —</option>
        <option>Afghanistan</option>
        <option>Åland Islands</option>
        <option>Albania</option>
        <option>Algeria</option>
        <option>American Samoa</option>
        <option>Andorra</option>
        <option>Angola</option>
        <option>Anguilla</option>
        <option>Antarctica</option>
        <option>Antigua and Barbuda</option>
        <option>Argentina</option>
        <option>Armenia</option>
        <option>Aruba</option>
        <option>Australia</option>
        <option>Austria</option>
        <option>Azerbaijan</option>
        <option>Bahamas</option>
        <option>Bahrain</option>
        <option>Bangladesh</option>
        <option>Barbados</option>
        <option>Belarus</option>
        <option>Belgium</option>
        <option>Belize</option>
        <option>Benin</option>
        <option>Bermuda</option>
        <option>Bhutan</option>
        <option>Bolivia</option>
        <option>Bosnia and Herzegovina</option>
        <option>Botswana</option>
        <option>Bouvet Island</option>
        <option>Brazil</option>
        <option>British Indian Ocean Territory</option>
        <option>Brunei Darussalam</option>
        <option>Bulgaria</option>
        <option>Burkina Faso</option>
        <option>Burundi</option>
        <option>Cambodia</option>
        <option>Cameroon</option>
        <option>Canada</option>
        <option>Cape Verde</option>
        <option>Cayman Islands</option>
        <option>Central African Republic</option>
        <option>Chad</option>
        <option>Chile</option>
        <option>China</option>
        <option>Christmas Island</option>
        <option>Cocos (Keeling) Islands</option>
        <option>Colombia</option>
        <option>Comoros</option>
        <option>Congo</option>
        <option>Congo, The Democratic Republic of the</option>
        <option>Cook Islands</option>
        <option>Costa Rica</option>
        <option>Cote D'Ivoire</option>
        <option>Croatia</option>
        <option>Cuba</option>
        <option>Cyprus</option>
        <option>Czech Republic</option>
        <option>Denmark</option>
        <option>Djibouti</option>
        <option>Dominica</option>
        <option>Dominican Republic</option>
        <option>Ecuador</option>
        <option>Egypt</option>
        <option>El Salvador</option>
        <option>Equatorial Guinea</option>
        <option>Eritrea</option>
        <option>Estonia</option>
        <option>Ethiopia</option>
        <option>Falkland Islands (Malvinas)</option>
        <option>Faroe Islands</option>
        <option>Fiji</option>
        <option>Finland</option>
        <option>France</option>
        <option>French Guiana</option>
        <option>French Polynesia</option>
        <option>French Southern Territories</option>
        <option>Gabon</option>
        <option>Gambia</option>
        <option>Georgia</option>
        <option>Germany</option>
        <option>Ghana</option>
        <option>Gibraltar</option>
        <option>Greece</option>
        <option>Greenland</option>
        <option>Grenada</option>
        <option>Guadeloupe</option>
        <option>Guam</option>
        <option>Guatemala</option>
        <option>Guernsey</option>
        <option>Guinea</option>
        <option>Guinea-Bissau</option>
        <option>Guyana</option>
        <option>Haiti</option>
        <option>Heard Island and Mcdonald Islands</option>
        <option>Holy See (Vatican City State)</option>
        <option>Honduras</option>
        <option>Hong Kong</option>
        <option>Hungary</option>
        <option>Iceland</option>
        <option>India</option>
        <option>Indonesia</option>
        <option>Iran, Islamic Republic Of</option>
        <option>Iraq</option>
        <option>Ireland</option>
        <option>Isle of Man</option>
        <option>Israel</option>
        <option>Italy</option>
        <option>Jamaica</option>
        <option>Japan</option>
        <option>Jersey</option>
        <option>Jordan</option>
        <option>Kazakhstan</option>
        <option>Kenya</option>
        <option>Kiribati</option>
        <option>Democratic People's Republic of Korea</option>
        <option>Korea, Republic of</option>
        <option>Kosovo</option>
        <option>Kuwait</option>
        <option>Kyrgyzstan</option>
        <option>Lao People's Democratic Republic</option>
        <option>Latvia</option>
        <option>Lebanon</option>
        <option>Lesotho</option>
        <option>Liberia</option>
        <option>Libyan Arab Jamahiriya</option>
        <option>Liechtenstein</option>
        <option>Lithuania</option>
        <option>Luxembourg</option>
        <option>Macao</option>
        <option>Macedonia, The Former Yugoslav Republic of</option>
        <option>Madagascar</option>
        <option>Malawi</option>
        <option>Malaysia</option>
        <option>Maldives</option>
        <option>Mali</option>
        <option>Malta</option>
        <option>Marshall Islands</option>
        <option>Martinique</option>
        <option>Mauritania</option>
        <option>Mauritius</option>
        <option>Mayotte</option>
        <option>Mexico</option>
        <option>Micronesia, Federated States of</option>
        <option>Moldova, Republic of</option>
        <option>Monaco</option>
        <option>Mongolia</option>
        <option>Montenegro</option>
        <option>Montserrat</option>
        <option>Morocco</option>
        <option>Mozambique</option>
        <option>Myanmar</option>
        <option>Namibia</option>
        <option>Nauru</option>
        <option>Nepal</option>
        <option>Netherlands</option>
        <option>Netherlands Antilles</option>
        <option>New Caledonia</option>
        <option>New Zealand</option>
        <option>Nicaragua</option>
        <option>Niger</option>
        <option>Nigeria</option>
        <option>Niue</option>
        <option>Norfolk Island</option>
        <option>Northern Mariana Islands</option>
        <option>Norway</option>
        <option>Oman</option>
        <option>Pakistan</option>
        <option>Palau</option>
        <option>Palestinian Territory, Occupied</option>
        <option>Panama</option>
        <option>Papua New Guinea</option>
        <option>Paraguay</option>
        <option>Peru</option>
        <option>Philippines</option>
        <option>Pitcairn</option>
        <option>Poland</option>
        <option>Portugal</option>
        <option>Puerto Rico</option>
        <option>Qatar</option>
        <option>Reunion</option>
        <option>Romania</option>
        <option>Russian Federation</option>
        <option>Rwanda</option>
        <option>Saint Helena</option>
        <option>Saint Kitts and Nevis</option>
        <option>Saint Lucia</option>
        <option>Saint Pierre and Miquelon</option>
        <option>Saint Vincent and the Grenadines</option>
        <option>Samoa</option>
        <option>San Marino</option>
        <option>Sao Tome and Principe</option>
        <option>Saudi Arabia</option>
        <option>Senegal</option>
        <option>Serbia</option>
        <option>Seychelles</option>
        <option>Sierra Leone</option>
        <option>Singapore</option>
        <option>Slovakia</option>
        <option>Slovenia</option>
        <option>Solomon Islands</option>
        <option>Somalia</option>
        <option>South Africa</option>
        <option>South Georgia and the South Sandwich Islands</option>
        <option>Spain</option>
        <option>Sri Lanka</option>
        <option>Sudan</option>
        <option>Suriname</option>
        <option>Svalbard and Jan Mayen</option>
        <option>Swaziland</option>
        <option>Sweden</option>
        <option>Switzerland</option>
        <option>Syrian Arab Republic</option>
        <option>Taiwan</option>
        <option>Tajikistan</option>
        <option>Tanzania, United Republic of</option>
        <option>Thailand</option>
        <option>Timor-Leste</option>
        <option>Togo</option>
        <option>Tokelau</option>
        <option>Tonga</option>
        <option>Trinidad and Tobago</option>
        <option>Tunisia</option>
        <option>Turkey</option>
        <option>Turkmenistan</option>
        <option>Turks and Caicos Islands</option>
        <option>Tuvalu</option>
        <option>Uganda</option>
        <option>Ukraine</option>
        <option>United Arab Emirates</option>
        <option>United Kingdom</option>
        <option>United States</option>
        <option>United States Minor Outlying Islands</option>
        <option>Uruguay</option>
        <option>Uzbekistan</option>
        <option>Vanuatu</option>
        <option>Venezuela</option>
        <option>Viet Nam</option>
        <option>Virgin Islands, British</option>
        <option>Virgin Islands, U.S.</option>
        <option>Wallis and Futuna</option>
        <option>Western Sahara</option>
        <option>Yemen</option>
        <option>Zambia</option>
        <option>Zimbabwe</option>
      </select>
    </div>

    <div class='tl-panel badge-flask'>
      <h2>Research Methods</h2>
      <p>Select all that apply</p>
      <div class='checkboxes'>
        <label><input type="checkbox" name="neuro_methods[]"
             value="Behavioral Experiments/Psychophysics"> Behavioral Experiments/Psychophysics
        </label>
        <label><input type="checkbox" name="neuro_methods[]"
             value="Brain Imaging (MRI)"> Brain Imaging (MRI)
        </label>
        <label><input type="checkbox" name="neuro_methods[]"
             value="Computational Modeling/Simulations"> Computational Modeling/Simulations
        </label>
        <label><input type="checkbox" name="neuro_methods[]"
             value="Distributed Computing"> Distributed Computing
        </label>
        <label><input type="checkbox" name="neuro_methods[]"
             value="Genetics"> Genetics
        </label>
        <label><input type="checkbox" name="neuro_methods[]"
             value="Invasive Electrophysiology"> Invasive Electrophysiology
        </label>
        <label><input type="checkbox" name="neuro_methods[]"
             value="Non-Invasive Electrophysiology"> Non-Invasive Electrophysiology
        </label>
        <label><input type="checkbox" name="neuro_methods[]"
             value="Spectroscopy"> Spectroscopy
        </label>
        <label><input type="checkbox" name="neuro_methods[]"
             value="Other"> Other
        </label>
      </div>
    </div>

    <div class='tl-panel inverted badge-laptop'>
      <h2>Research/Work Device</h2>
      <p>Which type of device is "yours" at work to use daily for
         research-related tasks?</p>
      <select name="personal_device" required>
        <option value="" disabled selected hidden>— Select —</option>
        <option>Phone/Tablet</option>
        <option>Laptop</option>
        <option>Desktop</option>
        <option>High-performance Workstation</option>
      </select>
    </div>

    <div class='tl-panel inverted badge-flask' data-next="maintainer">
      <h2>OS</h2>
      <p>What operating system does the above device run?</p>
      <select name="personal_OS" required>
        <option value="" disabled selected hidden>— Select —</option>
        <option>Android</option>
        <option>Linux</option>
        <option>OS X/iOS</option>
        <option>Windows</option>
        <option>Other</option>
      </select>
    </div>

    <div class='tl-panel inverted badge-linux' data-next="maintainer">
      <h2>Linux Distro</h2>
      <p>It's just like choosing your favorite ice cream — riddled with
         political implications.</p>
      <select name="personal_OS_linux" required>
        <option value="" disabled selected hidden>— Select —</option>
        <option>Debian</option>
        <option>Ubuntu/Mint</option>
        <option>RedHat/CentOS/Scientific Linux</option>
        <option>Fedora</option>
        <option>Arch</option>
        <option>Other</option>
        <option>Don't know</option>
      </select>
    </div>

    <div class='tl-panel inverted badge-flask' data-next="maintainer">
      <h2>Other OS</h2>
      <p><em>Alright.</em> We admit it, you've piqued our curiosity. What is
         this awesome system you run?</p>
      <input name="personal_OS_other" type="text" required>
    </div>

    <div class='tl-panel inverted badge-wrench' data-next="institute_device">
      <h2>Maintainer</h2>
      <p>Are you the person primarily responsible for maintaining this
         device?</p>
      <select name="maintainer" required>
        <option value="" disabled selected hidden>— Select —</option>
        <option>Yes</option>
        <option>No</option>
      </select>
    </div>

    <div class='tl-panel inverted badge-clock'>
      <h2>Hours/Month</h2>
      <p>How many hours per month do you personally spend maintaining this
         device?</p>
      <input name="hours" type="number" min="0" step="1" required>
    </div>

    <div class='tl-panel badge-cogs'>
      <h2>Shared Device</h2>
      <p>What type of shared, infrastructural device do you most use for
         research computing?</p>
      <select name="institute_device" required>
        <option value="" disabled selected hidden>— Select —</option>
        <option>None</option>
        <option>Workstation</option>
        <option>Server/Cluster</option>
        <option>Cloud/Grid</option>
        <option>Other</option>
      </select>
    </div>

    <div class='tl-panel badge-flask' data-next="personal_institute_usage">
      <h2>OS</h2>
      <p>What operating system does the above device run?</p>
      <select name="institute_OS" required>
        <option value="" disabled selected hidden>— Select —</option>
        <option>Linux</option>
        <option>OS X</option>
        <option>Windows</option>
        <option>Other</option>
      </select>
    </div>

    <div class='tl-panel badge-linux' data-next="personal_institute_usage">
      <h2>Linux Distro</h2>
      <p>It's just like choosing your favorite ice cream — riddled with
         political implications.</p>
      <select name="institute_OS_linux" required>
        <option value="" disabled selected hidden>— Select —</option>
        <option>Debian</option>
        <option>Ubuntu/Mint</option>
        <option>RedHat/CentOS/Scientific Linux</option>
        <option>Fedora</option>
        <option>Arch</option>
        <option>Other</option>
        <option>Don't know</option>
      </select>
    </div>

    <div class='tl-panel badge-flask' data-next="personal_institute_usage">
      <h2>Other OS</h2>
      <p><em>Alright.</em> We admit it, you've piqued our curiosity. What is
         this awesome system you run?</p>
      <input name="institute_OS_other" type="text" required>
    </div>

    <div class='tl-panel badge-flask'>
      <h2>Usage Pattern</h2>
      <p>Percentage of time you use "your device" vs. "shared infrastructure"
         (for research computing only)</p>
      <select name="personal_institute_usage" required>
        <option value="" disabled selected hidden>— Select —</option>
        <option>  0% mine / 100% shared</option>
        <option> 30% mine /  70% shared</option>
        <option> 50% mine /  50% shared</option>
        <option> 70% mine /  30% shared</option>
        <option>100% mine /   0% shared</option>
      </select>
    </div>

    <div class='tl-panel inverted badge-pencil' data-next="social_media">
      <h2>Publications in the last 5 years</h2>
      <p>How many peer-reviewed publications did you (co-)author in the last 5
         years?</p>
      <input name="publications_number" type="number" min="0" step="1" required>
    </div>

    <div class='tl-panel inverted badge-flask'>
      <h2># Open Access</h2>
      <p>How many of those are openly/freely available? (as an open access
         publication or on preprint servers like arXiv.org, etc)</p>
      <input name="publications_number_open_access" type="number" min="0" step="1" required>
    </div>

    <div class='tl-panel inverted badge-bullhorn'>
      <h2>Social Media</h2>
      <p>How often do you use social media (blog/Facebook/Google+/etc) to share
         about your research?</p>
      <select name="social_media" required>
        <option value="" disabled selected hidden>— Select —</option>
        <option>Never</option>
        <option>Daily</option>
        <option>Weekly</option>
        <option>Monthly</option>
        <option>Yearly</option>
      </select>
    </div>

    <div class='tl-panel badge-users' data-next="data_IRB">
      <h2>Collaborations in the last 5 years</h2>
      <p>How many collaborations (outside of your own lab) did you personally
         have in the last 5 years?</p>
      <input name="collaborations" type="number" min="0" step="1" required>
    </div>

    <div class='tl-panel badge-exchange' data-next="data_IRB">
      <h2>Exchange of Data</h2>
      <p>How many of those involved the exchange of research data (in either
         direction)?</p>
      <input name="collaborations_data" type="number" min="0" step="1" required>
    </div>

    <div class='tl-panel badge-flask' data-next="data_IRB">
      <h2>Provided Data</h2>
      <p>How many of those involved you <em>providing</em> data?</p>
      <input name="collaborations_data_provided" type="number" min="0" step="1" required>
    </div>

    <div class='tl-panel inverted badge-flask'>
      <h2>Permission to Share?</h2>
      <p>Does your consent form have provisions for public sharing/deposition of
         the collected data?</p>
      <select name="data_IRB" required>
        <option value="" disabled selected hidden>— Select —</option>
        <option>Yes</option>
        <option>No</option>
        <option>N/A</option>
      </select>
    </div>

    <div class='tl-panel inverted badge-flask'>
      <h2>Publicly Shared Data</h2>
      <p>Have you ever made your research data publicly available?</p>
      <select name="data_shared_publicly_ever" required>
        <option value="" disabled selected hidden>— Select —</option>
        <option>Yes</option>
        <option>No</option>
      </select>
    </div>

    <div class='tl-panel inverted badge-flask'>
      <h2>How many in the last 5 years?</h2>
      <p>How many datasets have you shared publicly in the last 5 years?</p>
      <input name="data_shared_publicly_num" type="number" min="0" step="1" required>
    </div>

    <div class='tl-panel inverted badge-book'>
      <h2>Published Data Papers?</h2>
      <p>Have you ever published a manuscript solely dedicated to the
         description of one of your datasets? (data in brief, data descriptor,
         data note, etc)</p>
      <select name="data_published_paper" required>
        <option value="" disabled selected hidden>— Select —</option>
        <option>Yes</option>
        <option>No</option>
      </select>
    </div>

    <div class='tl-panel inverted badge-flask'>
      <h2>Data from Public Datasets</h2>
      <p>How many publicly shared datasets have you used for any purpose
         (research, teaching, etc)?</p>
      <input name="data_consumed_public" type="number" min="0" step="1" required>
    </div>

    <div class='tl-panel badge-code' data-next="tool_manuscripts">
      <h2>Share Code?</h2>
      <p>Have you ever shared software/scripts/algorithms with anyone outside of
         your own lab?</p>
      <select name="code_shared" required>
        <option value="" disabled selected hidden>— Select —</option>
        <option>Yes</option>
        <option>No</option>
      </select>
    </div>

    <div class='tl-panel badge-flask'>
      <h2>Sharing Method</h2>
      <p>What's your preferred method of sharing code?</p>
      <select name="code_shared_method" required>
        <option value="" disabled selected hidden>— Select —</option>
        <option>Compiled code privately (e.g. email)</option>
        <option>Compiled code publicly (e.g. website)</option>
        <option>Source code privately (e.g. email)</option>
        <option>Source code publicly (e.g. GitHub, etc)</option>
      </select>
    </div>

    <div class='tl-panel inverted badge-pencil'>
      <h2>Manuscript Composer</h2>
      <p>What tool do you primarily use to write manuscripts/reports?</p>
      <select name="tool_manuscripts" required>
        <option value="" disabled selected hidden>— Select —</option>
        <option>Google Docs (or other online suite)</option>
        <option>LaTeX</option>
        <option>Libre/OpenOffice</option>
        <option>Microsoft Word</option>
        <option>Other</option>
      </select>
    </div>

    <div class='tl-panel inverted badge-flask'>
      <h2>Languages/Analysis</h2>
      <p>What programming languages/analysis environments do you use?</p>
      <div class="checkboxes">
        <label><input type="checkbox" name="tool_languages[]"
          value="C/C++"> C/C++ </label>
        <label><input type="checkbox" name="tool_languages[]"
          value="Fortran"> Fortran </label>
        <label><input type="checkbox" name="tool_languages[]"
          value="IDL"> IDL </label>
        <label><input type="checkbox" name="tool_languages[]"
          value="Java"> Java </label>
        <label><input type="checkbox" name="tool_languages[]"
          value="Lua"> Lua </label>
        <label><input type="checkbox" name="tool_languages[]"
          value="Maple"> Maple </label>
        <label><input type="checkbox" name="tool_languages[]"
          value="Mathcad"> Mathcad </label>
        <label><input type="checkbox" name="tool_languages[]"
          value="Mathematica"> Mathematica </label>
        <label><input type="checkbox" name="tool_languages[]"
          value="MATLAB"> MATLAB </label>
        <label><input type="checkbox" name="tool_languages[]"
          value="Octave"> Octave </label>
        <label><input type="checkbox" name="tool_languages[]"
          value="Perl"> Perl </label>
        <label><input type="checkbox" name="tool_languages[]"
          value="Python"> Python </label>
        <label><input type="checkbox" name="tool_languages[]"
          value="R"> R </label>
        <label><input type="checkbox" name="tool_languages[]"
          value="Ruby"> Ruby </label>
        <label><input type="checkbox" name="tool_languages[]"
          value="Scilab"> Scilab </label>
        <label><input type="checkbox" name="tool_languages[]"
          value="Shell Scripting"> Shell Scripting </label>
        <label><input type="checkbox" name="tool_languages[]"
          value="SPSS"> SPSS</label>
        <label><input type="checkbox" name="tool_languages[]"
          value="Other"> Other</label>
      </div>
    </div>

    <div class='tl-panel badge-flask'>
      <h2>Open Software</h2>
      <p>How much does the "openness" of a software tool influence your decision
         to use it</p>
      <select name="openness_sw" required>
        <option value="" disabled selected hidden>— Select —</option>
        <option>Not at all</option>
        <option>A little</option>
        <option>Somewhat</option>
        <option>A lot</option>
        <option>It's a requirement</option>
      </select>
    </div>

    <div class='tl-panel badge-flask'>
      <h2>Open Hardware</h2>
      <p>How much does the "openness" of a hardware tool influence your decision
         to use it</p>
      <select name="openness_hw" required>
        <option value="" disabled selected hidden>— Select —</option>
        <option>Not at all</option>
        <option>A little</option>
        <option>Somewhat</option>
        <option>A lot</option>
        <option>It's a requirement</option>
      </select>
    </div>

    <div class='tl-panel badge-flask'>
      <h2>Software</h2>
      <p>Which research software do you use?<br />
         Use the text input field to build a list. When possible, please use the
         suggested spelling of software names.</p>
      <!-- The input field intentionally does not have the "name" attribute.
           It is only to help building the list. We have no intent to use
           its contents ever. -->
      <input id="sw_list" type="text" list="sw_list_suggestions" placeholder="Software Name">
      <datalist id="sw_list_suggestions">
        <!-- the select is here purely for fallback purposes -->
        <select style="display: none;"></select>
      </datalist>
      <div class='checkboxes'></div>
      <p>Uncheck to remove an item from the list.</p>
      <a id="sw_list_next" role="button"><i class="icon-right-open"></i>Next Question</a>
    </div>

    <div class='tl-panel badge-flask'>
      <h2>Software Providers</h2>
      <p>Where/how do you <em>acquire</em> your research software?<br />
         Use the text input field to build a list. If possible, use the
         suggested spelling of provider names.</p>
      <!-- The input field intentionally does not have the "name" attribute.
           It is only to help building the list. We have no intent to use
           its contents ever. -->
      <input id="provider_list" type="text" list="provider_list_suggestions" placeholder="Provider Name">
      <datalist id="provider_list_suggestions">
        <!-- the select is here purely for fallback purposes -->
        <select style="display: none;"></select>
      </datalist>
      <div class='checkboxes'></div>
      <p>Uncheck to remove an item from the list.</p>
      <a id="provider_list_next" role="button"><i class="icon-right-open"></i>Next Question</a>
    </div>

    <div class='tl-panel inverted badge-flask'>
      <h2>All Done!</h2>
      <p>And <em>well done</em>.</p>
      <a id="done" role="button"><i class="icon-right-open"></i>Submit</a>
    </div>
  </div>
</form>
</main>
<footer>
  <p class="text-center text-muted"><small>
      © 2015 Alex Waite, <a href="http://www.psychoinformatics.de">Psychoinformatics.de</a> &nbsp;&bull;&nbsp; Code Freely available on <a href="https://github.com/psychoinformatics-de/dmc">GitHub</a>
  </small></p>
</footer>

<!-- javascript -->
<script src="js/moderizer_datalist.3.1.0.js"></script>
<script src="js/survey.js"></script>
<script src="neuro_choices.json"></script>

<script>
document.addEventListener("DOMContentLoaded", function() {
  survey = document.getElementById("survey");
  inputs = survey.elements;

 /*
  *  Field dependencies
  */
  custom_functions = {
    'personal_OS': function(field) {
      var panel = getPanel(field);

      if (field.value == 'Linux') {
        hidePanel(inputs['personal_OS_other']);
        panel.setAttribute('data-next', 'personal_OS_linux');
      } else if (field.value == 'Other') {
        hidePanel(inputs['personal_OS_linux']);
        panel.setAttribute('data-next', 'personal_OS_other');
      } else {
        hidePanel(inputs['personal_OS_other'], inputs['personal_OS_linux']);
        panel.setAttribute('data-next', 'maintainer');
      }
    },
    'maintainer': function(field) {
      var panel = getPanel(field);
      if (field.value == 'Yes') {
        panel.setAttribute('data-next', 'hours');
      } else {
        hidePanel(inputs["hours"]);
        panel.setAttribute('data-next', 'institute_device');
      }
    },
    'institute_device': function(field) {
      var panel = getPanel(field);
      if (field.value !== "None") {
        panel.setAttribute('data-next', 'institute_OS');
      } else {
        hidePanel(inputs["institute_OS"], inputs["institute_OS_linux"],
                  inputs["institute_OS_other"], inputs["personal_institute_usage"]);
        panel.setAttribute('data-next', 'publications_number');
      }
    },
    'institute_OS': function(field) {
      var panel = getPanel(field);

      if (field.value == 'Linux') {
        hidePanel(inputs["institute_OS_other"]);
        panel.setAttribute('data-next', 'institute_OS_linux');
      } else if (field.value == 'Other') {
        hidePanel(inputs["institute_OS_linux"]);
        panel.setAttribute('data-next', 'institute_OS_other');
      } else {
        hidePanel(inputs["institute_OS_linux"], inputs["institute_OS_other"]);
        panel.setAttribute('data-next', 'personal_institute_usage');
      }
    },
    'publications_number': function(field) {
      var panel = getPanel(field);
      if (field.value > 0) {
        inputs["publications_number_open_access"].setAttribute('max', field.value);
        panel.setAttribute('data-next', 'publications_number_open_access');
      } else {
        hidePanel(inputs["publications_number_open_access"]);
        panel.setAttribute('data-next', 'social_media');
      }
    },
    'collaborations': function(field) {
      var panel = getPanel(field);
      if (field.value > 0) {
        inputs["collaborations_data"].setAttribute('max', field.value);
        panel.setAttribute('data-next', 'collaborations_data');
      } else {
        hidePanel(inputs["collaborations_data"], inputs["collaborations_data_provided"]);
        panel.setAttribute('data-next', 'data_IRB');
      }
    },
    'collaborations_data': function(field) {
      var panel = getPanel(field);
      if (field.value > 0) {
        inputs["collaborations_data_provided"].setAttribute('max', field.value);
        panel.setAttribute('data-next', 'collaborations_data_provided');
      } else {
        hidePanel(inputs["collaborations_data_provided"]);
        panel.setAttribute('data-next', 'data_IRB');
      }
    },
    'data_shared_publicly_ever': function(field) {
      var panel = getPanel(field);
      if (field.value == "Yes") {
        panel.setAttribute('data-next', 'data_shared_publicly_num');
      } else {
        hidePanel(inputs["data_shared_publicly_num"], inputs["data_published_paper"]);
        panel.setAttribute('data-next', 'data_consumed_public');
      }
    },
    'code_shared': function(field) {
      var panel = getPanel(field);
      if (field.value == "Yes") {
        panel.setAttribute('data-next', 'code_shared_method');
      } else {
        hidePanel(inputs["code_shared_method"]);
        panel.setAttribute('data-next', 'tool_manuscripts');
      }
    }
  };

  var uuid = getUrlVar("uuid");
  if (uuid) {
    var xhr = new XMLHttpRequest();
    xhr.open('GET', 'u/' + uuid + '/record', true);
    xhr.onload = function() {
      if (this.status >= 200 && this.status < 400) {
        var user_data = JSON.parse(this.response);
        populateForm(user_data);
      } else {
        alert("Failed to load " + uuid
          + '.\nPlease report this error at: '
          +  '\nhttps://github.com/psychoinformatics-de/dmc/issues');
      }
    };
    xhr.send();
  }

  // walk through to validate/show the form
  var questions = survey.querySelectorAll('div.tl-panel');
  for (var q of questions) {
    // if the question is hidden, skip it
    if (! q.classList.contains('visible')) { continue; }

    var fields = q.querySelectorAll('input select');
    for (var f of fields) {
      var field_name = f.getAttribute('name');

      if (field_name !== undefined) {
        if (f.validity.valid) {
          // if we have custom functions for the field in question
          if (custom_functions[field_name] !== undefined) {
            custom_functions[field_name](f);
          }
          markValid(f);
          showNextQuestion(q, 0);
        } else {
          markInvalid(f);
          break;
        }
      }
    }

    // if there's a validation error, break
    if (q.classList.contains('has-error')) { break; }
  }

 /*
  *  Form submission
  */
  // suppress conventional form submission
  survey.addEventListener('submit', function(e){ e.preventDefault(); });

  // Submit form as JSON
  var done = survey.querySelector('#done');
  var events = ['click', 'keypress'];
  for (var e of events) {
    done.addEventListener(e, function() {
      var form = new FormData(survey);
      var json = {};
      for (field of form) {
        if (field[0].substr(-2) === '[]') { // checkbox
          json[field[0]] = json[field[0]] || []; // instantiate as array if needed
          json[field[0]].push(field[1]);
        } else {
          json[field[0]] = field[1];
        }
      }

      var data = JSON.stringify({ 'json': json });
      var xhr = new XMLHttpRequest();
      xhr.open('POST', '/submit', true);
      xhr.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');
      xhr.onload = function() {
        if (this.status === 200) {
          window.location = this.responseText; // redirect to where we're told
        } else {
          console.log(data);
          alert("Keanu 'Whoa' " + this.status + " error; and that's not supposed to happen."
              + "\n\nWould you please report this error at"
              +   "\nhttps://github.com/psychoinformatics-de/dmc/issues");
        }
      };
      xhr.send(data);
    });
  }

  // if the browser supports the datalist element, build the datalists
  //   and have inputs build checkbox lists upon enter
  if (Modernizr.datalistelem) {
    // sw_choices is defined in *_choices.json
    survey.querySelector('#sw_list_suggestions').innerHTML = sw_choices;
    survey.querySelector('#sw_list').addEventListener('change', function() { addCheckbox(this, this.value); });

    // provider_choices is defined in *_choices.json
    survey.querySelector('#provider_list_suggestions').innerHTML = provider_choices;
    survey.querySelector('#provider_list').addEventListener('change', function() { addCheckbox(this, this.value); });
  } else {
    // TODO: warn user upon loading the page.
    console.log('Consider yeself forewarned! Yarrr!');
  }

 /*
  *  Navigation
  *  All inputs, upon completion/validation, will show/scroll-to the next question
  */
  for (var f of inputs) {
    if (f.nodeName == 'SELECT') {
      f.addEventListener('change', watchIfReadyForNextQuestion);
    } else if (f.nodeName == 'INPUT') {
      if (f.getAttribute('list') == undefined) { // no datalist inputs
        if (f.getAttribute('type') == 'checkbox') {
          f.addEventListener('change', watchIfReadyForNextQuestion);
        } else if (f.getAttribute('type') !== 'hidden') {
          f.addEventListener('input', watchIfReadyForNextQuestion);
        }
      }
    }
  }

  //
  // target-specific buttons for nav
  //

  var tell_us = document.getElementById('tell_us');
  var events = ['click', 'keypress'];
  for (var e of events) {
    tell_us.addEventListener(e, function() { scrollTo(survey.querySelector('.tl-panel.visible')); });
  }

  // make "next" buttons work
  for (var b of survey.querySelectorAll('#sw_list_next, #provider_list_next')) {
    b.addEventListener('click', watchIfReadyForNextQuestion);
    b.addEventListener('keypress', watchIfReadyForNextQuestion);
  }

});
</script>
</body>
</html>
