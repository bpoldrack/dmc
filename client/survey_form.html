<!DOCTYPE HTML>
<html>
<head>
    <title>Getting Started Sample</title>
    <meta charset="UTF-8">

    <link type="text/css" rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="http://code.cloudcms.com/alpaca/1.5.14/bootstrap/alpaca.min.css">

    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.3/handlebars.js"></script>
    <script type="text/javascript" src="http://code.cloudcms.com/alpaca/1.5.14/bootstrap/alpaca.min.js"></script>
</head>
<body>
<div class="container" style="margin-top:30px">
    <div class="row">
        <div class="col-md-12">
            <div id="survey"></div>
        </div>
    </div>
</div>

<script type="text/javascript">
$(document).ready(function() {
  $("#survey").alpaca({
      /* Useful, for when we pre-seed updated profiles
      "dataSource": "./survey_data",
      */
      "schemaSource": "./survey_schema",
      "optionsSource": "./survey_options",
      "view": {
        "wizard": {
          "bindings": {
            "employer": 1,
            "position": 1,
            "country": 1,
            "methods": 1,
            "personal_device": 2,
            "personal_OS": 2,
            "personal_OS_linux": 2,
            "personal_OS_other": 2,
            "responsible": 2,
            "hours": 2,
            "institute_device": 2,
            "institute_OS": 2,
            "institute_OS_linux": 2,
            "institute_OS_other": 2,
            "personal_institute_usage": 2,
            "publications_number": 3,
            "publications_number_open_access": 3,
            "publications_number_preprint_server": 3,
            "blog": 3,
            "lab_collaborations": 3,
            "data_shared": 3,
            "data_shared_collaborations": 3,
            "data_shared_publicly": 3,
            "data_published_solely": 3,
            "data_IRB": 3,
            "data_consumed": 3,
            "data_consumed_collaborations": 3,
            "data_consumed_public": 3,
            "data_read_solely": 3,
            "code_shared": 3,
            "code_shared_method": 3,
            "tool_manuscripts": 4,
            "tool_languages": 4
          },
        "steps": [{
          "title": "Demographics",
          "description": "Whoooo are you. Who Who; who who!?"
        }, {
          "title": "Computational Research Environment",
          "description": "Let's Compare Widgets"
        }, {
          "title": "Research Output",
          "description": "Let's Go Out Tonight"
        }, {
          "title": "Research Tools",
           "description": "Don't be a tool"
        }]
      }
    },
    "options": {
      "form": {
        "buttons": {
          "submit": {
            "title": "Sub",
            "click": function() {
              var val = this.getValue();
              $.ajax({
                type: "POST",
                contentType: 'application/json',
                url: "http://localhost:8080/submit",
                data: JSON.stringify(val),
                success: function(msg) { alert('Yay ' + msg) },
                error: function(xhr, ajaxOptions, thrownError) {
                  alert(xhr.status);
                  alert(ajaxOptions);
                  alert(thrownError);
                }
              });
            }
          }
        }
      }
    }
  });
});
</script>
</body>
</html>
